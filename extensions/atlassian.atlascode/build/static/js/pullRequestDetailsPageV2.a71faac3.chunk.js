"use strict";(self.webpackChunkatlascode=self.webpackChunkatlascode||[]).push([[224],{6406:(e,t,a)=>{var n;a.d(t,{Bg:()=>l,IH:()=>r,J8:()=>o,M:()=>m,MB:()=>d,Rc:()=>c,sR:()=>i}),function(e){e.Update="update",e.Remove="remove"}(n||(n={}));const r={name:"Jira",key:"jira"},l={name:"Bitbucket",key:"bitbucket"};var s,i;!function(e){e.BitbucketCloud="bbcloud",e.BitbucketCloudStaging="bbcloudstaging",e.JiraCloud="jiracloud",e.JiraCloudStaging="jiracloudstaging",e.JiraCloudRemote="jiracloudremote"}(s||(s={})),function(e){e[e.Valid=0]="Valid",e[e.Invalid=1]="Invalid"}(i||(i={}));const o={id:"",displayName:"",email:"",avatarUrl:""},c={id:"",name:"",avatarUrl:"",host:"",baseLinkUrl:"",baseApiUrl:"",product:{name:"",key:""},isCloud:!0,userId:"",credentialId:""},d={user:o,state:i.Valid},m={user:o,username:"",password:"",state:i.Valid}},9603:(e,t,a)=>{a.d(t,{n:()=>ErrorDisplay});var n=a(61633),r=a(82096),l=a(69440),s=a(42460),i=a(82290),o=a(73546),c=a(13118),d=a(44866),m=a(96540),u=a(25279),p=a(94211);const E=(0,r.A)((e=>({indent:{marginLeft:e.spacing(3)}}))),ErrorDisplay=({})=>{const e=E(),t=(0,m.useContext)(p.Jg),a=(0,m.useContext)(p.Er),[r,g]=(0,m.useState)(t.isErrorBannerOpen);(0,m.useEffect)((()=>{g((e=>e!==t.isErrorBannerOpen?t.isErrorBannerOpen:e))}),[t.isErrorBannerOpen]);const h=[];(0,n.HT)(t.errorDetails)?(Object.keys(t.errorDetails.errors).forEach((a=>{h.push(m.createElement("p",{key:a},m.createElement("b",null,a,":"),m.createElement("span",{className:e.indent},t.errorDetails.errors[a])))})),t.errorDetails.errorMessages.forEach((t=>{h.push(m.createElement("p",{key:(0,u.A)()},m.createElement("span",{className:e.indent},t)))}))):(0,n.Jc)(t.errorDetails)?t.errorDetails.errorMessages.forEach((t=>{h.push(m.createElement("p",{key:(0,u.A)()},m.createElement("span",{className:e.indent},t)))})):"object"===typeof t.errorDetails?Object.keys(t.errorDetails).forEach((a=>{h.push(m.createElement("p",{key:a},m.createElement("b",null,a,":"),m.createElement("span",{className:e.indent},JSON.stringify(t.errorDetails[a]))))})):h.push(m.createElement("p",{key:(0,u.A)()},t.errorDetails));const A=(0,m.useCallback)((()=>{a.dismissError(),g(!1)}),[a]),f=(0,m.useCallback)((()=>{g(!1)}),[]),b=t.errorDetails&&t.errorDetails.title?t.errorDetails.title:"Something went wrong";return m.createElement(m.Fragment,null,m.createElement(l.A,{in:t.isErrorBannerOpen},m.createElement(c.A,{variant:"standard",severity:"error",action:m.createElement(s.A,{"aria-label":"close",color:"inherit",size:"small",onClick:A},m.createElement(o.A,{fontSize:"inherit"}))},m.createElement(d.A,null,b),h)),m.createElement(i.A,{open:r,autoHideDuration:6e3,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"}},m.createElement(c.A,{variant:"standard",severity:"error",action:m.createElement(s.A,{"aria-label":"close",color:"inherit",size:"small",onClick:f},m.createElement(o.A,{fontSize:"inherit"}))},m.createElement(d.A,null,b),m.createElement("p",null,"See details at the top of this page"))))}},26378:(e,t,a)=>{a.d(t,{f:()=>formatTime});var n=a(41394),r=a(18373),l=a(9798),s=a(44414);function formatTime(e,t={}){if(!e)return"";let a;if(a="number"===typeof e?new Date(e):(0,n.H)(e),Number.isNaN(a.getTime()))return"";if(void 0!==t.daysPreference){if((0,r.c)(new Date,a)>=t.daysPreference)return(0,l.GP)(a,"yyyy-MM-dd")}return`${t.prefix?`${t.prefix} `:""}${(0,s.m)(a,{addSuffix:!0})}`}},27030:(e,t,a)=>{var n;a.d(t,{QJ:()=>r}),function(e){e[e.SECONDS=1e3]="SECONDS",e[e.MINUTES=6e4]="MINUTES",e[e.HOURS=36e5]="HOURS",e[e.DAYS=864e5]="DAYS",e[e.WEEKS=6048e5]="WEEKS",e[e.MONTHS=2592e6]="MONTHS",e[e.FOREVER=1/0]="FOREVER"}(n||(n={}));const r=30*n.SECONDS;n.SECONDS},27184:(e,t,a)=>{a.d(t,{G:()=>useMessagingApi});var n,r=a(96540);!function(e){e.Error="error",e.PMFStatus="pmfStatus",e.UpdateFeatureFlags="updateFeatureFlags",e.UpdateExperimentValues="updateExperimentValues"}(n||(n={}));var l=a(94211),s=a(59478);function useMessagingApi(e){const t=(0,r.useMemo)(acquireVsCodeApi,[acquireVsCodeApi]),a=(0,r.useCallback)((e=>{t.postMessage(e)}),[t]),i=(0,r.useCallback)(((e,a,r,l)=>(t.postMessage(e),new Promise(((e,t)=>{const s=setTimeout((()=>{window.removeEventListener("message",promiseListener),clearTimeout(s),t(`timeout waiting for event ${a}`)}),r),promiseListener=r=>{!r.data.type||!a||r.data.type!==a||l&&r.data.nonce!==l||(clearTimeout(s),window.removeEventListener("message",promiseListener),e(r.data)),r.data.type===n.Error&&l&&r.data.nonce===l&&(window.removeEventListener("message",promiseListener),clearTimeout(s),t(r.data.reason))};window.addEventListener("message",promiseListener)})))),[t]),o=(0,r.useContext)(l.Er),c=(0,r.useContext)(s.j8),d=(0,r.useCallback)((t=>{const a=t.data;if(a&&a.type)switch(a.type){case n.Error:o.showError(a.reason);break;case n.PMFStatus:a.showPMF&&c.showPMFBanner();break;default:e(a)}}),[o,c,e]);return(0,r.useEffect)((()=>(window.addEventListener("message",d),t.postMessage({type:"refresh"}),()=>{window.removeEventListener("message",d)})),[e,d,t]),[a,i]}},30981:(e,t,a)=>{a.d(t,{n:()=>o});var n=a(82096),r=a(54392),l=a(34164),s=a(96540);const i=(0,n.A)((e=>({root:{fontSize:e.typography.pxToRem(14),fontStyle:"italic"}}))),o=(0,s.memo)((({children:e,className:t,...a})=>{const n=i();return s.createElement(r.A,{variant:"subtitle1",className:(0,l.A)(n.root,t),...a},e||"")}))},31783:(e,t,a)=>{a.d(t,{x:()=>o});var n=a(82096),r=a(54392),l=a(34164),s=a(96540);const i=(0,n.A)((e=>({root:{marginRight:e.spacing(2)}}))),o=(0,s.memo)((({children:e,className:t,...a})=>{const n=i();return s.createElement(r.A,{variant:"h4",className:(0,l.A)(n.root,t),...a},e||"")}))},36398:(e,t,a)=>{a.r(t),a.d(t,{PullRequestDetailsPage:()=>PullRequestDetailsPage,default:()=>ut});var n=a(3596),r=a(82096),l=a(18297),s=a(27606),i=a(96746),o=a(54392),c=a(29984),d=a(26232),m=a(56424),u=a(48672),p=a(3148),E=a(10476),g=a(96540),h=a(64933),A=a(96611),f=a(83182),b=a(96232),C=a(33615),k=a(4882);const BranchInfo=({source:e,destination:t,author:a,isLoading:n})=>{let r="",l="";e.repo.url!==t.repo.url&&(r=e.repo.fullName+":",l=t.repo.fullName+":");const i=r+e.branchName,o=l+t.branchName;return n?g.createElement(f.A,null):g.createElement(s.A,{container:!0,spacing:1,direction:"row",justify:"flex-start",alignItems:"center",wrap:"wrap"},g.createElement(s.A,{item:!0},g.createElement(b.Ay,{title:i},g.createElement(C.A,{clickable:!0,color:"primary",label:i,size:"small"}))),g.createElement(s.A,{item:!0},g.createElement(k.A,null)),g.createElement(s.A,{item:!0},g.createElement(b.Ay,{title:o},g.createElement(C.A,{clickable:!0,color:"primary",label:o,size:"small"}))))};var y,v=a(9361),S=a(25279),w=a(50569);!function(e){e.FetchUsersRequest="fetchUsersRequest",e.UpdateSummaryRequest="updateSummaryRequest",e.UpdateTitleRequest="updateTitleRequest",e.UpdateReviewers="updateReviewers",e.UpdateApprovalStatus="updateApprovalStatus",e.CheckoutBranch="checkoutBranch",e.PostComment="postComment",e.EditComment="editComment",e.DeleteComment="deleteComment",e.AddTask="addTask",e.EditTask="editTask",e.DeleteTask="deleteTask",e.OpenDiffRequest="openDiffRequest",e.Merge="merge",e.OpenJiraIssue="openJiraIssue",e.OpenBuildStatus="openBuildStatus"}(y||(y={}));var D,R=a(55765);!function(e){e.Init="init",e.FetchUsersResponse="fetchUsersResponse",e.PostCommentResponse="postCommentResponse",e.EditCommentResponse="editCommentResponse",e.DeleteCommentResponse="deleteCommentResponse",e.AddTaskResponse="addTaskResponse",e.EditTaskResponse="editTaskResponse",e.DeleteTaskResponse="deleteTaskResponse",e.UpdateReviewersResponse="updateReviewersResponse",e.UpdateSummary="updateSummary",e.UpdateTitle="updateTitle",e.UpdateCommits="updateCommits",e.UpdateReviewers="updateReviewers",e.UpdateApprovalStatus="updateApprovalStatus",e.CheckoutBranch="checkoutBranch",e.UpdateComments="updateComments",e.UpdateFileDiffs="updateFileDiffs",e.UpdateBuildStatuses="updateBuildStatuses",e.UpdateMergeStrategies="updateMergeStrategies",e.UpdateRelatedJiraIssues="updateRelatedJiraIssues",e.UpdateTasks="updateTasks",e.UpdateConflictedFiles="updateConflictedFiles"}(D||(D={}));const U={pr:R.GT,commits:[],currentUser:R.F2,currentBranchName:"",comments:[],fileDiffs:[],mergeStrategies:[],buildStatuses:[],relatedJiraIssues:[],tasks:[],loadState:{basicData:!0,comments:!0,commits:!0,tasks:!0,relatedJiraIssues:!0,diffs:!0,mergeStrategies:!0,buildStatuses:!0},conflictedFiles:[]};var N=a(27030),I=a(27184);const x=g.createContext({postMessage:e=>{},refresh:()=>{},copyLink:()=>{},fetchUsers:async(e,t,a)=>[],updateSummary:async e=>{},updateTitle:async e=>{},updateReviewers:async e=>{},updateApprovalStatus:e=>{},checkoutBranch:()=>{},postComment:async(e,t)=>{},editComment:async(e,t)=>{},deleteComment:async e=>{},addTask:async(e,t)=>{},editTask:async e=>{},deleteTask:async e=>{},openDiff:e=>{},merge:(e,t,a,n)=>{},openJiraIssue:e=>{},openBuildStatus:e=>{}}),T={...U,isCheckingOutBranch:!1};var B;function pullRequestDetailsReducer(e,t){switch(t.type){case B.Init:return{...e,...t.data,loadState:{...t.data.loadState,basicData:!1},isErrorBannerOpen:!1,errorDetails:void 0};case B.Loading:return{...e,isSomethingLoading:!0};case B.UpdateSummary:return{...e,pr:{...e.pr,data:{...e.pr.data,htmlSummary:t.data.htmlSummary,rawSummary:t.data.rawSummary}}};case B.UpdateTitle:return{...e,pr:{...e.pr,data:{...e.pr.data,title:t.data.title}}};case B.UpdateReviewers:return{...e,pr:{...e.pr,data:{...e.pr.data,participants:t.data.reviewers}}};case B.UpdateApprovalStatus:{const a=e.currentUser.accountId,n=void 0===e.pr.data.participants.find((e=>e.accountId===a))?[...e.pr.data.participants,{...e.currentUser,status:t.data.status,role:"PARTICIPANT"}]:e.pr.data.participants.map((a=>a.accountId===e.currentUser.accountId?{...a,status:t.data.status}:a));return{...e,pr:{...e.pr,data:{...e.pr.data,participants:n}}}}case B.CheckoutBranch:return{...e,currentBranchName:t.data.branchName};case B.UpdateCommits:return{...e,commits:t.data.commits,loadState:{...e.loadState,commits:!1}};case B.UpdateComments:return{...e,comments:t.data.comments,loadState:{...e.loadState,comments:!1}};case B.UpdateTasks:return{...e,comments:t.data.comments,tasks:t.data.tasks,loadState:{...e.loadState,tasks:!1}};case B.UpdateFileDiffs:return{...e,fileDiffs:t.data.fileDiffs,loadState:{...e.loadState,diffs:!1}};case B.UpdateConflictedFiles:return{...e,conflictedFiles:t.data.conflictedFiles,loadState:{...e.loadState,diffs:!1}};case B.UpdateBuildStatuses:return{...e,buildStatuses:t.data.buildStatuses,loadState:{...e.loadState,buildStatuses:!1}};case B.UpdateMergeStrategies:return{...e,mergeStrategies:t.data.mergeStrategies,loadState:{...e.loadState,mergeStrategies:!1}};case B.UpdateRelatedJiraIssues:return{...e,relatedJiraIssues:t.data.relatedIssues,loadState:{...e.loadState,relatedJiraIssues:!1}};case B.SetCheckoutLoading:return{...e,isCheckingOutBranch:t.data.isLoading};default:return(0,v.y)(e,t)}}!function(e){e.Init="init",e.ConfigChange="configChange",e.Loading="loading",e.UpdateSummary="updateSummary",e.UpdateTitle="updateTitle",e.UpdateCommits="updateCommits",e.UpdateReviewers="updateReviewers",e.UpdateApprovalStatus="updateApprovalStatus",e.CheckoutBranch="checkoutBranch",e.UpdateComments="updateComments",e.UpdateTasks="updateTasks",e.AddComment="addComment",e.UpdateFileDiffs="updateFileDiffs",e.UpdateConflictedFiles="updateConflictedFiles",e.UpdateBuildStatuses="updateBuildStatuses",e.UpdateMergeStrategies="updateMergeStrategies",e.UpdateRelatedJiraIssues="updateRelatedJiraIssues",e.SetCheckoutLoading="setCheckoutLoading"}(B||(B={}));var M=a(61434),P=a(35376),F=a(10782),L=a(42460),O=a(75437);const CopyLinkButton=e=>{const t=(0,g.useCallback)((()=>e.onClick(e.url)),[e]);return g.createElement(b.Ay,{title:e.tooltip},g.createElement(L.A,{"aria-label":"copy link",onClick:t},g.createElement(O.A,null)))};var J=a(77690);const ApproveButton=({hidden:e,status:t,onApprove:a})=>{const n=(0,g.useCallback)((()=>{a("APPROVED"===t?"UNAPPROVED":"APPROVED")}),[a,t]);return g.createElement(l.A,{hidden:e},g.createElement(i.A,{startIcon:g.createElement(J.A,{htmlColor:"#07b82b"}),color:"primary",variant:"contained",onClick:n},g.createElement(o.A,{variant:"button",noWrap:!0},"APPROVED"===t?"Unapprove":"Approve")))};var z=a(32118),$=a(5696),q=a(68016),W=a(83220),H=a(84630),_=a(90648),j=a(79764),V=a(24896),G=a(64794),Q=a(65816),K=a(72007),Y=a(65594),X=a(90652),Z=a(19371),ee=a(6651),te=a(75981);const ae=(0,r.A)((e=>({tableCell:{borderBottom:"none",align:"align"}}))),JiraTransitionMenu=({issue:e,handleIssueTransition:t,onShouldTransitionChange:a})=>{var n;const r=ae(),[s,i]=(0,g.useState)(K.rv),[c,d]=(0,g.useState)(!1),m=(0,g.useCallback)((()=>{d(!c)}),[c]),u=(0,g.useCallback)((a=>{i(a.target.value),t(e,a.target.value),d(!0)}),[i,t,e]);return(0,g.useEffect)((()=>{var t;(null===(t=e.transitions)||void 0===t?void 0:t.length)>0?i(e.transitions.find((t=>t.to.id===e.status.id))||e.transitions[0]):i(K.rv)}),[e]),(0,g.useEffect)((()=>{a(e.id,c)}),[e.id,c,a]),(null===(n=e.transitions)||void 0===n?void 0:n.length)<1?g.createElement(l.A,null):g.createElement(Y.A,{key:e.id},g.createElement(X.A,{className:r.tableCell},g.createElement(Z.A,{color:"primary",checked:c,onChange:m})),g.createElement(X.A,{className:r.tableCell},g.createElement(o.A,null,g.createElement("strong",null,e.key),": ",e.summary)),g.createElement(X.A,{className:r.tableCell},g.createElement(W.A,{select:!0,value:s,onChange:u},(e.transitions||[K.rv]).map((e=>g.createElement(H.A,{key:e.id,value:e},g.createElement(te.A,{appearance:ee.zK[e.to.statusCategory.colorName],label:e.to.name})))))))};var ne=a(13118);const MergeChecks=({prData:e})=>{const{taskCount:t,participants:a,buildStatuses:n}=e,r=t,l=a.filter((e=>"APPROVED"===e.status)).length,s=a.filter((e=>"CHANGES_REQUESTED"===e.status)).length;let i=!1;if(Array.isArray(n)&&n.length>0){const e=n.filter((e=>"SUCCESSFUL"===e.state));i=n.length!==e.length}const c=l>0&&0===r&&0===s&&!i;return g.createElement(ne.A,{variant:"standard",severity:c?"success":"warning"},g.createElement(o.A,null,0===l?"Pull request has no approvals":`Pull request has ${l} ${1===l?"approval":"approvals"}`),r>0&&g.createElement(o.A,null,"Pull request has unresolved tasks"),s>0&&g.createElement(o.A,null,"Pull request has been marked as - Request Changes "),i&&g.createElement(o.A,null,"Pull request has unsuccessful builds"))},re=(0,r.A)((e=>({table:{width:"unset"}}))),le={label:"Default merge strategy",value:"",isDefault:!1},MergeDialog=({prData:e,commits:t,relatedJiraIssues:a,mergeStrategies:r,loadState:c,merge:d})=>{const m=re(),[u,p]=(0,g.useState)(!1),[E,h]=(0,g.useState)(""),[A,b]=(0,g.useState)(le),[C,k]=(0,g.useState)(!1),[y,v]=(0,g.useState)(a),[S]=(0,g.useState)(new Map),[w,D]=(0,g.useState)(!0),R=(0,g.useCallback)((()=>{const e=y.filter((e=>S.get(e.id)));k(!0),d(A,E,w,e),p(!1)}),[d,p,A,E,w,y,S]),U=(0,g.useCallback)((()=>{p(!1)}),[p]),N=(0,g.useCallback)((()=>{p(!0)}),[p]),I=(0,g.useCallback)((e=>{b(e.target.value)}),[]),x=(0,g.useCallback)((e=>{h(e)}),[]),T=(0,g.useCallback)((e=>""===e.trim()),[]),B=(0,g.useCallback)((a=>{const n=a.value;if("fast_forward"===n)return"";const{id:r,source:l,title:s,participants:i}=e;let o=`${`Merged in ${l&&l.branchName}`} ${`(pull request #${r})`}\n\n${s}`;if("squash"===n&&(1!==t.length||t[0].message!==s)){o+=`\n\n${t.reverse().map((e=>`* ${e.message}`)).join("\n")}`}const c=i.filter((e=>"APPROVED"===e.status));if(c.length>0){o+=`\n\n${c.map((e=>`Approved-by: ${e.displayName}`)).join("\n")}`}return o}),[t,e]),M=(0,g.useCallback)(((e,t)=>{const a=y.map((a=>a.key===e.key?{...a,status:{...a.status,id:t.to.id,name:t.to.name}}:a));v(a)}),[y]),P=(0,g.useCallback)(((e,t)=>{S.set(e,t)}),[S]),F=(0,g.useCallback)((()=>D(!w)),[w]);return(0,g.useEffect)((()=>{a.forEach((e=>S.set(e.id,!0))),v(a)}),[a,S]),(0,g.useEffect)((()=>{h(B(A))}),[B,h,A]),(0,g.useEffect)((()=>{k(!1)}),[e.state]),(0,g.useEffect)((()=>{D(e.closeSourceBranch)}),[e.closeSourceBranch]),(0,g.useEffect)((()=>{if(A.value===le.value){const e=r.find((e=>!0===e.isDefault));b(null!==e&&void 0!==e?e:le)}}),[r,A]),g.createElement(l.A,null,g.createElement(l.A,{hidden:c.basicData},g.createElement(i.A,{color:"primary",variant:"contained",onClick:N,disabled:"OPEN"!==e.state||C},g.createElement(o.A,{variant:"button",noWrap:!0},"OPEN"===e.state?"Merge":"Merged"))),g.createElement(l.A,{hidden:!c.basicData},g.createElement(f.A,null)),g.createElement(z.A,{open:u,onClose:U,fullWidth:!0,maxWidth:"md","aria-labelledby":"merge-dialog-title"},g.createElement($.A,null,g.createElement(o.A,{variant:"h4"},"Merge Pull Request")),g.createElement(q.A,null,g.createElement(MergeChecks,{prData:e}),g.createElement(l.A,{marginTop:5}),g.createElement(s.A,{container:!0,spacing:1,direction:"column",alignItems:"stretch"},g.createElement(s.A,{item:!0},g.createElement(l.A,{hidden:c.mergeStrategies},g.createElement(W.A,{select:!0,value:A,onChange:I,fullWidth:!0,size:"small",label:"Merge Strategy"},g.createElement(H.A,{key:le.label,value:le,disabled:!0},"Select a merge strategy"),r.map((e=>g.createElement(H.A,{key:e.label,value:e},e.label))))),g.createElement(l.A,{hidden:!c.mergeStrategies},g.createElement(f.A,null))),g.createElement(s.A,{item:!0},g.createElement(l.A,{hidden:!c.commits},g.createElement(f.A,null)),g.createElement(l.A,{hidden:c.commits},g.createElement(n.wI,{fullWidth:!0,multiline:!0,rows:5,defaultValue:E,onSave:x,placeholder:"Enter commit message",saveDisabled:T,label:"Commit Message"}))),g.createElement(s.A,{item:!0},g.createElement(l.A,{hidden:!c.relatedJiraIssues},g.createElement(f.A,null)),g.createElement(l.A,{hidden:c.relatedJiraIssues},g.createElement(l.A,{marginTop:3,hidden:0===y.length},g.createElement(o.A,{variant:"h5"},"Transition issues")),g.createElement(_.A,null,g.createElement(j.A,{size:"small","aria-label":"issues to transition"},g.createElement(V.A,{className:m.table},y.map((e=>g.createElement(JiraTransitionMenu,{issue:e,handleIssueTransition:M,onShouldTransitionChange:P,key:e.key})))))))),g.createElement(s.A,{item:!0},g.createElement(n.V_,{control:g.createElement(G.A,{size:"small",color:"primary",value:"Close source branch",checked:w,onChange:F}),label:"Close source branch",spacing:1,variant:"body1"})))),g.createElement(Q.A,null,g.createElement(i.A,{variant:"contained",onClick:U,color:"primary"},"Cancel"),g.createElement(i.A,{variant:"contained",onClick:R,color:"primary"},"Merge"))))};var se=a(67826);const RequestChangesButton=({hidden:e,status:t,onApprove:a})=>{const n=(0,g.useCallback)((()=>{a("CHANGES_REQUESTED"===t?"NO_CHANGES_REQUESTED":"CHANGES_REQUESTED")}),[a,t]);return g.createElement(l.A,{hidden:e},g.createElement(i.A,{startIcon:g.createElement(se.A,{htmlColor:"#FFAB00"}),color:"primary",variant:"contained",onClick:n},g.createElement(o.A,{variant:"button",noWrap:!0},"CHANGES_REQUESTED"===t?"Changes Requested":"Request Changes")))},PullRequestHeaderActions=({state:e,controller:t})=>{const[a,r]=(0,g.useState)("UNAPPROVED");(0,g.useEffect)((()=>{const t=e.pr.data.participants.find((t=>t.accountId===e.currentUser.accountId));t&&r(t.status)}),[e.pr.data.participants,e.currentUser.accountId]);const s=(0,g.useMemo)((()=>Object.entries(e.loadState).some((e=>e[1]))),[e.loadState]);return g.createElement(g.Fragment,null,g.createElement(CopyLinkButton,{tooltip:"Copy link to pull request",url:e.pr.data.url,onClick:t.copyLink}),g.createElement(l.A,{marginLeft:1,hidden:e.loadState.basicData},g.createElement(RequestChangesButton,{hidden:!e.pr.site.details.isCloud&&e.currentUser.accountId===e.pr.data.author.accountId,status:a,onApprove:t.updateApprovalStatus})),g.createElement(l.A,{marginLeft:1,hidden:e.loadState.basicData},g.createElement(ApproveButton,{hidden:!e.pr.site.details.isCloud&&e.currentUser.accountId===e.pr.data.author.accountId,status:a,onApprove:t.updateApprovalStatus})),g.createElement(l.A,{marginLeft:1,hidden:e.loadState.basicData},g.createElement(MergeDialog,{prData:e.pr.data,commits:e.commits,relatedJiraIssues:e.relatedJiraIssues,mergeStrategies:e.mergeStrategies,loadState:{basicData:e.loadState.basicData,commits:e.loadState.commits,mergeStrategies:e.loadState.mergeStrategies,relatedJiraIssues:e.loadState.relatedJiraIssues},merge:t.merge})),g.createElement(n.sv,{loading:s,onClick:t.refresh}))},PullRequestHeader=({state:e,controller:t})=>g.createElement(M.A,{position:"relative"},g.createElement(P.A,null,g.createElement(l.A,{flexGrow:1},g.createElement(o.A,{variant:"h3"},g.createElement(F.A,{color:"textPrimary",href:e.pr.data.url},`${e.pr.data.destination.repo.displayName}: Pull request #${e.pr.data.id}`))),g.createElement(PullRequestHeaderActions,{state:e,controller:t})));var ie=a(82782),oe=a(14944),ce=a(91024),de=a(42561),me=a(31783),ue=a(30981);const pe=(0,r.A)((()=>({expansionPanelSummary:{backgroundColor:"unset",border:"unset",boxShadow:"unset",flexDirection:"row-reverse",marginLeft:0,paddingLeft:0,"& .MuiExpansionPanelSummary-expandIcon":{padding:0,marginRight:"8px",marginLeft:0,transform:"rotate(270deg)","&.Mui-expanded":{transform:"rotate(0deg)"}}},expansionPanel:{boxShadow:"none"},root:{"& .MuiPaper-root":{backgroundColor:"transparent",boxShadow:"none"}}}))),Ee=(0,g.memo)((({title:e,subtitle:t,isDefaultExpanded:a=!0,isLoading:n,hidden:r,children:s})=>{const i=pe(),[o,c]=(0,g.useState)(!!a),d=(0,g.useCallback)(((e,t)=>{c(t)}),[]);return g.createElement(l.A,{hidden:!n&&r,className:i.root},g.createElement(ie.A,{square:!1,expanded:o,onChange:d,className:i.expansionPanel},g.createElement(oe.A,{expandIcon:g.createElement(de.A,null),className:i.expansionPanelSummary},g.createElement(me.x,null,e),t&&g.createElement(ue.n,null,t)),g.createElement(ce.A,null,n?g.createElement(f.A,null):s)))}));var ge=a(91004),he=a(46762),Ae=a(73337),fe=a(92320),be=a(89552),Ce=a(89781),ke=a(38341),ye=a(61396),ve=a(87155),Se=a(39082),we=a(69025),De=a(58903),Re=a(42845),Ue=a(1575);function markInputRule(e,t,a){return new ke.fV(e,((e,n,r,l)=>{const s=a instanceof Function?a(n):a,i=e.tr,o=n[0],c=n.length>2?n[1]:"",d=n.length>2?n[2]:n[1];if(d){const e=r+o.indexOf(d),t=e+d.length;t<l&&i.delete(t,l),e>r&&i.delete(r+c.length,e),l=r+c.length+d.length}return i.addMark(r+c.length,l,t.create(s)),i.removeStoredMark(t),i}))}const buildInputRules=e=>{const t=[];return e.marks.strong&&(t.push(markInputRule(/(?:\*\*)([^\*_]+)(?:\*\*|__)$/,e.marks.strong,void 0)),t.push(markInputRule(/(?:__)([^_]+)(?:__)$/,e.marks.strong,void 0))),e.marks.em&&(t.push(markInputRule(/(^|[^\*])(?:\*)([^\*]+)(?:\*)$/,e.marks.em,void 0)),t.push(markInputRule(/(^|[^_])(?:_)([^_]+)(?:_)$/,e.marks.em,void 0))),e.marks.link&&t.push(markInputRule(/(^|[^!])\[(.*?)\]\((\S+)\)$/,e.marks.link,(e=>({href:e[3]})))),t.push((0,ke.tG)(/^\s*>\s$/,e.nodes.blockquote),(0,ke.tG)(/^(\d+)\.\s$/,e.nodes.ordered_list,(e=>({order:+e[1]})),((e,t)=>t.childCount+t.attrs.order===+e[1])),(0,ke.tG)(/^\s*([-+*])\s$/,e.nodes.bullet_list),(0,ke.JJ)(/^```$/,e.nodes.code_block),(0,ke.JJ)(new RegExp("^(#{1,6})\\s$"),e.nodes.heading,(e=>({level:e[1].length})))),t},Ne=new De.Sj({nodes:(0,Se.hF)(ve.wQ.spec.nodes),marks:ve.wQ.spec.marks}),Ie=new ve.K6({...ve.lR.nodes,mention:(e,t)=>{e.write(t.attrs.id)}},ve.lR.marks),xe=new ve.Fd(Ne,ve.ee.tokenizer,{...ve.ee.tokens}),Te=new Re.hs("reactProps");const Be=(0,r.A)((e=>({editor:{borderWidth:1,borderStyle:"solid",borderColor:"light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)",borderRadius:e.shape.borderRadius,"&:hover":{borderColor:e.palette.text.primary},"&:focus-within":{borderColor:e.palette.primary.main,borderWidth:2}}}))),MarkdownEditor=e=>{const t=(0,d.A)(),a=Be(),r=(0,g.useRef)(null),o=(0,g.useRef)(null),[c,m]=(0,g.useState)(!0),[u,p]=(0,g.useState)(e.initialContent||""),[E,h]=(0,g.useState)("initial"),A=(0,g.useCallback)((e=>{m(e.target.checked)}),[]),b=(0,g.useCallback)((e=>p(e.target.value)),[]),C=(0,g.useCallback)((()=>{var t,a,n;if(c){const e=null===(t=o.current)||void 0===t?void 0:t.state.doc.slice(0),n=o.current.state.tr.delete(0,(null===e||void 0===e?void 0:e.size)||0);null===(a=o.current)||void 0===a||a.dispatch(n)}else p("");null===(n=e.onCancel)||void 0===n||n.call(e)}),[c,e.onCancel]),k=(0,g.useCallback)((async()=>{const t=c?Ie.serialize(o.current.state.doc):u;if(t.trim().length>0)try{h("submitting"),await e.onSave(t),C()}finally{h("initial")}}),[e,C,u,c]);return(0,g.useEffect)((()=>{if(o.current)if(c){const e=o.current.state.doc.slice(0),t=o.current.state.tr.replaceWith(0,(null===e||void 0===e?void 0:e.size)||0,xe.parse(u));o.current.dispatch(t)}else p(Ie.serialize(o.current.state.doc))}),[c]),(0,g.useEffect)((()=>{const t=(0,fe.Kw)(Ne),a=[(n=e,new Re.k_({key:Te,state:{init:()=>n,apply:(e,t)=>e.getMeta(Te)||t}})),(0,ye.w)((0,fe.eu)(Ne)),(0,ye.w)(he.RV),(0,Ae.A)(),(0,be.z)(),(0,we.Hy)({floating:!1,content:[[t.toggleStrong,t.toggleEm,t.toggleCode],[t.wrapBulletList,t.wrapOrderedList,t.wrapBlockQuote]]}),(0,Ce.b6)(),(0,ke.sM)({rules:buildInputRules(Ne)})];var n;e.fetchUsers&&a.unshift((0,Se.Z7)({getSuggestions:async(t,a,n)=>{if("mention"===t){n((await e.fetchUsers(a)).map((e=>({name:e.displayName,id:e.mention,email:e.emailAddress||""}))))}},getSuggestionsHTML:(e,t)=>"mention"===t?(e=>'<div class="suggestion-item-list">'+e.map((e=>'<div class="suggestion-item">'+e.name+"</div>")).join("")+"</div>")(e):g.createElement(g.Fragment,null)}));const l=Re.$t.create({schema:Ne,doc:xe.parse(u),plugins:a}),s=new Ue.Lz(r.current,{state:l});return o.current=s,()=>s.destroy()}),[]),(0,g.useEffect)((()=>{if(o.current){const t=o.current.state.tr.setMeta(Te,e);o.current.dispatch(t)}})),g.createElement(s.A,{container:!0,spacing:1,direction:"column"},g.createElement(s.A,{item:!0},g.createElement(l.A,{hidden:!c,minHeight:"8em",className:a.editor,ref:r}),g.createElement(l.A,{hidden:c,minHeight:"8em"},g.createElement(W.A,{multiline:!0,fullWidth:!0,rows:4,rowsMax:20,value:u,onChange:b}))),g.createElement(s.A,{item:!0},g.createElement(s.A,{container:!0,spacing:1},g.createElement(s.A,{item:!0},g.createElement(i.A,{variant:"contained",color:"primary",onClick:k,disabled:"submitting"===E,endIcon:"submitting"===E?g.createElement(f.A,{color:"inherit",size:t.typography.fontSize}):null},"Save")),g.createElement(s.A,{item:!0},g.createElement(i.A,{variant:"contained",onClick:C},"Cancel")),g.createElement(s.A,{item:!0,xs:!0}),g.createElement(s.A,{item:!0},g.createElement(n.V_,{label:"Rich text editor",control:g.createElement(G.A,{size:"small",color:"primary",checked:c,onChange:A}),spacing:1,variant:"body2"})))))},common_CommentForm=e=>g.createElement(s.A,{container:!0,spacing:1,alignItems:"flex-start"},g.createElement(s.A,{item:!0},g.createElement(ge.A,{src:e.currentUser.avatarUrl})),g.createElement(s.A,{item:!0,xs:10},g.createElement(s.A,{container:!0,spacing:1,direction:"column"},g.createElement(s.A,{item:!0},g.createElement(MarkdownEditor,{initialContent:e.initialContent,onSave:e.onSave,onCancel:e.onCancel,fetchUsers:e.fetchUsers})))));var Me=a(9603),Pe=a(59302),Fe=a(69211),Le=a(9798),Oe=a(41394),Je=a(26378);const TaskAdder=({addTask:e,handleCancel:t})=>{const[a,n]=(0,g.useState)(!1),[r,l]=(0,g.useState)(""),o=(0,g.useCallback)((async()=>{n(!0);try{await e(r)}finally{l(""),n(!1)}}),[r,e]),c=(0,g.useCallback)((()=>{t()}),[t]),d=(0,g.useCallback)((e=>{l(e.target.value)}),[l]);return g.createElement(s.A,{container:!0,spacing:1,direction:"row",alignItems:"flex-start"},g.createElement(Z.A,{color:"primary",disabled:!0}),g.createElement(s.A,{item:!0,xs:!0},g.createElement(s.A,{container:!0,direction:"column"},g.createElement(W.A,{size:"small",value:r,onChange:d,name:"content",autoComplete:"off",disabled:a}),g.createElement(s.A,{item:!0},g.createElement(s.A,{container:!0,direction:"row"},g.createElement(s.A,{item:!0},g.createElement(i.A,{color:"primary",onClick:o,disabled:""===r.trim()||a},"Save")),g.createElement(s.A,{item:!0},g.createElement(i.A,{color:"primary",onClick:c,disabled:a},"Cancel")))))))};var ze=a(24711),$e=a(73546);const qe=(0,r.A)({container:{display:"flex",alignItems:"flex-start",flex:1,minWidth:0},textContent:{flex:1,minWidth:0,padding:"4px",cursor:"text",lineHeight:"20px",color:"var(--vscode-editor-foreground)",wordBreak:"break-word",whiteSpace:"pre-wrap",overflow:"hidden","&:hover":{border:"1px solid var(--vscode-input-border)",padding:"3px"},"&:focus":{outline:"none",border:"1px solid var(--vscode-focusBorder)",padding:"3px"}},closeButton:{padding:4,marginLeft:4,marginTop:3},disabled:{cursor:"default",opacity:.7}}),EditableTextComponent=({initialContent:e="",placeholder:t,onSave:a,onCancel:n,onFocus:r,className:l="",showCancelButton:s=!0,disabled:i=!1})=>{const o=qe(),[c,d]=(0,g.useState)(!1),m=(0,g.useRef)(null),u=(0,g.useCallback)((async t=>{var n;if(t.relatedTarget&&t.relatedTarget.classList.contains(o.closeButton))return;const r=(null===(n=m.current)||void 0===n?void 0:n.textContent)||"";r.trim()&&(await a(r),m.current&&!e&&(m.current.textContent="")),d(!1)}),[a,o.closeButton,e]),p=(0,g.useCallback)((()=>{m.current&&(m.current.textContent=e,m.current.blur()),d(!1),null===n||void 0===n||n()}),[e,n]),E=(0,g.useCallback)((()=>{i||(d(!0),null===r||void 0===r||r())}),[i,r]);return g.createElement("div",{className:`${o.container}`},g.createElement("div",{ref:m,className:`${o.textContent} ${l} ${i?o.disabled:""}`,contentEditable:!i,onFocus:E,onBlur:u,onKeyDown:e=>{var t;"Enter"===e.key&&(e.preventDefault(),null===(t=m.current)||void 0===t||t.blur()),"Escape"===e.key&&(e.preventDefault(),p())},"data-placeholder":t},e),c&&s&&g.createElement(b.Ay,{title:"Cancel (Esc)"},g.createElement(L.A,{size:"small",onClick:p,className:o.closeButton},g.createElement($e.A,{fontSize:"small"}))))},We=(0,r.A)({taskContainer:{display:"flex",alignItems:"flex-start","&:hover .deleteButton":{opacity:1},width:"100%",minWidth:0},checkbox:{padding:0,marginRight:8,marginTop:3},deleteButton:{padding:4,marginLeft:4,marginTop:3,opacity:0,transition:"opacity 0.2s","&:hover":{color:"var(--vscode-errorForeground)"}}}),CommentTask=({task:e,onEdit:t,onDelete:a})=>{const n=We(),[r,l]=(0,g.useState)(!1),[s,i]=(0,g.useState)(!1),o=(0,g.useCallback)((async()=>{l(!0),await t({...e,isComplete:!e.isComplete}),l(!1)}),[e,t]),c=(0,g.useCallback)((async a=>{a.trim()!==e.content&&(l(!0),await t({...e,content:a}),l(!1)),i(!1)}),[e,t]),d=(0,g.useCallback)((async()=>{l(!0),await a(e)}),[e,a]),m=(0,g.useCallback)((()=>{i(!1)}),[]),u=(0,g.useCallback)((()=>{i(!0)}),[]);return g.createElement("div",{className:n.taskContainer},g.createElement(Z.A,{color:"primary",checked:e.isComplete,onChange:o,disabled:r,className:n.checkbox}),g.createElement(EditableTextComponent,{initialContent:e.content,onSave:c,onCancel:m,onFocus:u,showCancelButton:s,disabled:!e.editable||r}),!s&&e.deletable&&g.createElement(b.Ay,{title:"Delete task"},g.createElement(L.A,{size:"small",onClick:d,className:`${n.deleteButton} deleteButton`,disabled:r},g.createElement(ze.A,{fontSize:"small"}))))},CommentTaskList=({tasks:e,onEdit:t,onDelete:a})=>g.createElement(s.A,{container:!0,spacing:1,direction:"column",justify:"center"},e.map((e=>g.createElement(s.A,{key:e.id,item:!0},g.createElement(CommentTask,{task:e,onEdit:t,onDelete:a}))))),He=(0,r.A)({actionButton:{textTransform:"none",minWidth:"auto",padding:"0","&:hover":{background:"transparent",textDecoration:"underline"},fontWeight:"normal",fontSize:"14px",color:"inherit"},buttonSeparator:{color:"inherit",content:".",display:"inline-Lock",textAlign:"left",verticalAlign:"middle",marginRight:"8px",marginLeft:"8px"},avatar:{width:"24",height:"24"},userName:{fontWeight:"bold"},timestamp:{marginLeft:"8px",cursor:"default"},commentTaskList:{marginTop:"8px"}}),NestedComment=({comment:e,currentUser:t,fetchUsers:a,onDelete:n})=>{const r=He(),[c,d]=(0,g.useState)(!1),[m,u]=(0,g.useState)(!1),[p,E]=(0,g.useState)(!1),[h,A]=(0,g.useState)(!1),C=(0,g.useContext)(x),k=(0,g.useCallback)((()=>{d(!0)}),[]),y=(0,g.useCallback)((()=>{E(!0)}),[]),v=(0,g.useCallback)((()=>{E(!1)}),[]),S=(0,g.useCallback)((async t=>{await C.addTask(t,e.id),E(!1)}),[C,e.id]),w=(0,g.useCallback)((async t=>{await C.postComment(t,e.id),d(!1)}),[C,e.id]),D=(0,g.useCallback)((()=>{u(!0)}),[]),R=(0,g.useCallback)((async t=>{await C.editComment(t,e.id),u(!1)}),[C,e.id]),U=(0,g.useCallback)((()=>{u(!1)}),[]),N=(0,g.useCallback)((()=>{d(!1)}),[]),I=(0,g.useCallback)((async()=>{A(!0),await n(e)}),[e,n]);return(0,g.useEffect)((()=>{A(!1)}),[e]),g.createElement(g.Fragment,null,g.createElement(l.A,{hidden:m},g.createElement(s.A,{container:!0,spacing:1,direction:"row",alignItems:"flex-start"},g.createElement(s.A,{item:!0},g.createElement(ge.A,{className:r.avatar,src:e.user.avatarUrl,alt:e.user.displayName})),g.createElement(s.A,{item:!0,xs:!0},g.createElement(s.A,{container:!0,direction:"column"},g.createElement(s.A,{item:!0},g.createElement(o.A,{variant:"subtitle2"},g.createElement("span",{className:r.userName},e.user.displayName),g.createElement(b.Ay,{title:(0,Le.GP)((0,Oe.H)(e.ts),"MMMM d, yyyy 'at' HH:mm:ss a zzz")},g.createElement("span",{className:r.timestamp},(0,Je.f)(e.ts,{daysPreference:7}))))),g.createElement(l.A,{hidden:!h},g.createElement(f.A,null)),g.createElement(l.A,{hidden:h},g.createElement(o.A,{dangerouslySetInnerHTML:{__html:e.htmlContent}})),g.createElement(s.A,{item:!0},g.createElement(s.A,{container:!0,direction:"row",alignItems:"center"},g.createElement(i.A,{className:r.actionButton,disableRipple:!0,onClick:k},"Reply"),g.createElement("span",{className:r.buttonSeparator},"\xb7"),g.createElement(l.A,{hidden:!e.editable},g.createElement(i.A,{className:r.actionButton,disableRipple:!0,onClick:D},"Edit"),g.createElement("span",{className:r.buttonSeparator},"\xb7")),g.createElement(l.A,{hidden:e.deleted||!e.deletable},g.createElement(i.A,{className:r.actionButton,disableRipple:!0,onClick:I},"Delete"),g.createElement("span",{className:r.buttonSeparator},"\xb7")),g.createElement(i.A,{className:r.actionButton,disableRipple:!0,onClick:y},"Create task"))),g.createElement(s.A,{item:!0,className:r.commentTaskList},g.createElement(CommentTaskList,{tasks:e.tasks,onEdit:C.editTask,onDelete:C.deleteTask})),g.createElement(s.A,{item:!0},g.createElement(l.A,{hidden:!p},g.createElement(TaskAdder,{handleCancel:v,addTask:S}))),g.createElement(s.A,{item:!0},g.createElement(l.A,{hidden:!c},g.createElement(common_CommentForm,{currentUser:t,onSave:w,onCancel:N,fetchUsers:a}))),g.createElement(s.A,{item:!0},g.createElement(l.A,{hidden:0===e.children.length},g.createElement(NestedCommentList,{comments:e.children,currentUser:t,onDelete:n,fetchUsers:a}))))))),g.createElement(l.A,{hidden:!m},g.createElement(common_CommentForm,{initialContent:e.rawContent,currentUser:t,onSave:R,onCancel:U,fetchUsers:a})))},_e=(0,r.A)({nestedComment:{marginTop:16}}),NestedCommentList=({comments:e,currentUser:t,fetchUsers:a,onDelete:n})=>{const r=_e();return g.createElement(s.A,{container:!0,spacing:1,direction:"column",justify:"center"},e.map((e=>g.createElement(s.A,{item:!0,key:e.id,className:r.nestedComment},g.createElement(NestedComment,{comment:e,currentUser:t,fetchUsers:a,onDelete:n})))))},je=(0,r.A)((e=>({table:{width:"unset"},tableCell:{borderBottom:"none"}}))),RelatedJiraIssues=({relatedIssues:e,openJiraIssue:t})=>{const a=je();return g.createElement(_.A,null,g.createElement(j.A,{size:"small","aria-label":"related jira issues",className:a.table},g.createElement(V.A,null,e.map((e=>g.createElement(Y.A,{key:e.id},g.createElement(X.A,{align:"left",className:a.tableCell},g.createElement(l.A,{width:16,height:16},g.createElement(b.Ay,{title:e.issuetype.name},g.createElement("img",{style:{width:"100%"},src:e.issuetype.iconUrl})))),g.createElement(X.A,{align:"left",className:a.tableCell},g.createElement(F.A,{href:"#",onClick:()=>t(e)},g.createElement(o.A,null,e.key))),g.createElement(X.A,{align:"left",className:a.tableCell},g.createElement(o.A,null,e.summary)),g.createElement(X.A,{align:"left",className:a.tableCell},g.createElement(l.A,{width:16,height:16},g.createElement(b.Ay,{title:`Priority: ${e.priority.name}`},g.createElement("img",{style:{width:"100%"},src:e.priority.iconUrl})))),g.createElement(X.A,{align:"left",className:a.tableCell},g.createElement(te.A,{appearance:ee.zK[e.status.statusCategory.colorName],label:e.status.name}))))))))};var Ve=a(19773),Ge=a(7756);const Qe=(0,r.A)((e=>({container:{borderWidth:1,borderRadius:4,borderStyle:"solid",borderColor:"transparent","&:hover":{borderColor:"initial"}},editbutton:{cursor:"pointer",height:"100%",display:"flex","align-items":"center","background-color":"dark"===e.palette.type?(0,Ve.a)(e.palette.background.default,.15):(0,Ve.e$)(e.palette.background.default,.15)}}))),pullrequest_InlineRenderedTextEditor=e=>{const t=Qe(),[a,n]=(0,g.useState)(!1),[r,i]=(0,g.useState)(!1),c=(0,g.useCallback)((()=>n(!0)),[]),d=(0,g.useCallback)((()=>n(!1)),[]),m=(0,g.useCallback)((()=>i(!0)),[]),u=(0,g.useCallback)((()=>i(!1)),[]),p=(0,g.useCallback)((async t=>{var a;null===(a=e.onSave)||void 0===a||a.call(e,t),d()}),[d,e.onSave]);return a?g.createElement(MarkdownEditor,{initialContent:e.rawContent,onSave:p,onCancel:d,fetchUsers:e.fetchUsers}):g.createElement(s.A,{container:!0,spacing:1,direction:"row",className:t.container,onMouseEnter:m,onMouseLeave:u},g.createElement(s.A,{item:!0,xs:!0},g.createElement(o.A,{variant:"body1",dangerouslySetInnerHTML:{__html:e.htmlContent}})),g.createElement(s.A,{item:!0},g.createElement(l.A,{className:t.editbutton,onClick:c,visibility:!0===r&&void 0!==e.onSave?"visible":"hidden"},g.createElement(b.Ay,{title:"Click to edit"},g.createElement(Ge.A,null)))))},Ke=(0,g.memo)((({rawSummary:e,htmlSummary:t,fetchUsers:a,summaryChange:n,isLoading:r,isDefaultExpanded:l})=>{const s=(0,g.useCallback)((async e=>await a(e)),[a]),i=(0,g.useCallback)((e=>{n(e)}),[n]);return g.createElement(Ee,{title:"Summary",isLoading:r,isDefaultExpanded:l},g.createElement(pullrequest_InlineRenderedTextEditor,{rawContent:e,htmlContent:t,onSave:i,fetchUsers:s}))})),PullRequestMainContent=({state:e,controller:t,handleFetchUsers:a})=>g.createElement(l.A,{margin:2},g.createElement(s.A,{container:!0,spacing:3,direction:"column",justify:"center"},g.createElement(Me.n,null),g.createElement(s.A,{item:!0},g.createElement(Ke,{rawSummary:e.pr.data.rawSummary,htmlSummary:e.pr.data.htmlSummary,fetchUsers:a,isLoading:e.loadState.basicData,summaryChange:t.updateSummary})),e.relatedJiraIssues.length>0&&g.createElement(s.A,{item:!0},g.createElement(Ee,{title:"Related Jira Issues",subtitle:`${e.relatedJiraIssues.length} issues`,isLoading:e.loadState.relatedJiraIssues,hidden:0===e.relatedJiraIssues.length},g.createElement(RelatedJiraIssues,{relatedIssues:e.relatedJiraIssues,openJiraIssue:t.openJiraIssue}))),g.createElement(s.A,{item:!0},g.createElement(Ee,{title:"Commits",subtitle:`${e.commits.length} commits`,isDefaultExpanded:!0,isLoading:e.loadState.commits},g.createElement(Pe.f,{commits:e.commits}))),g.createElement(s.A,{item:!0},g.createElement(Ee,{title:"Files Changed",subtitle:"Click on file names to open diff in editor",isDefaultExpanded:!0,isLoading:e.loadState.diffs},g.createElement(Fe.K,{fileDiffs:e.fileDiffs,openDiffHandler:t.openDiff,conflictedFiles:e.conflictedFiles}))),g.createElement(s.A,{item:!0},g.createElement(Ee,{title:"Comments",isDefaultExpanded:!0,isLoading:e.loadState.comments},g.createElement(s.A,{container:!0,spacing:2,direction:"column"},g.createElement(s.A,{item:!0},g.createElement(NestedCommentList,{comments:e.comments,currentUser:e.currentUser,fetchUsers:a,onDelete:t.deleteComment})),g.createElement(s.A,{item:!0},g.createElement(common_CommentForm,{currentUser:e.currentUser,fetchUsers:a,onSave:t.postComment}))))))),formatDate=e=>e?"number"===typeof e?(0,Le.GP)(new Date(e),"yyyy-MM-dd h:mm a"):(0,Le.GP)((0,Oe.H)(e),"yyyy-MM-dd h:mm a"):"";var Ye=a(47201);const Xe=(0,r.A)({container:{display:"flex",alignItems:"flex-start"},addIcon:{padding:0,marginRight:8,marginTop:3,fontSize:20,color:"var(--vscode-editor-foreground)",opacity:.8,marginLeft:4},taskInput:{"&:empty:before":{content:'"Create task"',color:"var(--vscode-input-placeholderForeground)",fontStyle:"italic"}}}),PageTaskAdder=()=>{const e=Xe(),t=(0,g.useContext)(x);return g.createElement("div",{className:e.container},g.createElement(Ye.A,{className:e.addIcon}),g.createElement(EditableTextComponent,{onSave:t.addTask,className:e.taskInput,placeholder:"Create task"}))},PageTaskList=({tasks:e,onEdit:t,onDelete:a})=>g.createElement(s.A,{container:!0,spacing:1,direction:"column"},e.map((e=>g.createElement(s.A,{key:e.id,item:!0},g.createElement(CommentTask,{task:e,onEdit:t,onDelete:a})))),g.createElement(s.A,{item:!0},g.createElement(PageTaskAdder,null)));var Ze=a(16064),et=a(99549);const tt=g.createElement(J.A,{style:{color:"green"}}),at=g.createElement(et.A,{style:{color:"blue"}}),nt=g.createElement(Ze.A,{style:{color:"red"}}),rt=(0,r.A)({buildlLinkButton:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",background:"none",border:"none",padding:0,cursor:"pointer",color:"var(--vscode-textLink-foreground)",textAlign:"left","&:hover":{textDecoration:"underline"}}}),PRBuildStatus=({buildStatuses:e,openBuildStatus:t})=>{const a=rt(),n=[...e].sort(((e,t)=>{const a={FAILED:0,STOPPED:1,INPROGRESS:2,SUCCESSFUL:3};return a[e.state]-a[t.state]}));return g.createElement(s.A,{container:!0,direction:"column",spacing:2},n.map((e=>{const n=e.last_updated||e.ts,r=e.last_updated?"":"Started",i=(0,Je.f)(n);return g.createElement(s.A,{item:!0,key:e.url},g.createElement(l.A,{display:"flex",alignItems:"center",style:{width:"250px"}},"INPROGRESS"===e.state?at:"SUCCESSFUL"===e.state?tt:nt,g.createElement(l.A,{ml:1,display:"flex",flexDirection:"column",style:{minWidth:0}},g.createElement("button",{onClick:()=>t(e),className:a.buildlLinkButton,title:e.name},e.name||e.key),g.createElement(o.A,{variant:"caption",style:{color:"var(--vscode-editor-foreground)"}},`${r} ${i}`))))})))};var lt=a(36936),st=a(30296),it=a(29459),ot=a(89925),ct=a(19877);const dt=(0,r.A)({container:{display:"flex",alignItems:"center",width:"100%",position:"relative",paddingLeft:28},addIcon:{padding:0,fontSize:20,color:"var(--vscode-editor-foreground)",opacity:.8,position:"absolute",left:4,top:"50%",transform:"translateY(-50%)",display:"flex",alignItems:"center",justifyContent:"center",height:"20px",width:"20px",lineHeight:0},autocompleteRoot:{flex:1,"& .MuiInputBase-root":{backgroundColor:"transparent",color:"var(--vscode-editor-foreground)",padding:"0 !important",minHeight:"24px",display:"flex",alignItems:"center",border:"1px solid transparent",borderRadius:"2px","&.Mui-focused":{border:"1px solid var(--vscode-editor-foreground)"},"&:hover":{border:"1px solid var(--vscode-editor-foreground)"}},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"& .MuiInputBase-input":{color:"var(--vscode-editor-foreground)",height:"24px",lineHeight:"24px",padding:"0 7px !important","&::placeholder":{color:"var(--vscode-input-placeholderForeground)",opacity:.8,fontStyle:"italic"}},"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiFormControl-marginDense":{margin:"0"}},optionContainer:{padding:"8px"},avatarContainer:{marginRight:"8px"},optionText:{color:"var(--vscode-editor-foreground)"}}),AddReviewers=({site:e,reviewers:t,updateReviewers:a})=>{const n=(0,g.useContext)(x),[r,l]=(0,g.useState)(""),i=dt(),c=(0,ct.A)((()=>(0,E.A)((async(e,t,a)=>await n.fetchUsers(e,t,a)),300,{leading:!1}))),d=(0,g.useCallback)(((e,t)=>{"change"===(null===e||void 0===e?void 0:e.type)&&l(t)}),[l]),m=(0,ot.Us)((async a=>{if(r.length>1&&e){return(await c(e,r,a)).filter((e=>!t.some((t=>t.accountId===e.accountId))))}return[]}),[e,r,t]),u=(0,g.useCallback)((async(e,n)=>{if(n){const e=[...t,n];await a(e)}}),[t,a]);return g.createElement("div",{className:i.container},g.createElement(Ye.A,{className:i.addIcon}),g.createElement(it.Ay,{className:i.autocompleteRoot,size:"small",options:m.result||[],getOptionLabel:e=>(null===e||void 0===e?void 0:e.displayName)||"",onInputChange:d,onChange:u,loading:m.loading,renderInput:e=>g.createElement(W.A,{...e,variant:"outlined",placeholder:"Add reviewer",InputProps:{...e.InputProps,startAdornment:null}}),renderOption:e=>g.createElement("div",{className:i.optionContainer},g.createElement(s.A,{container:!0,alignItems:"center"},g.createElement(s.A,{item:!0,className:i.avatarContainer},g.createElement(ge.A,{src:null===e||void 0===e?void 0:e.avatarUrl})),g.createElement(s.A,{item:!0},g.createElement(o.A,{className:i.optionText},null===e||void 0===e?void 0:e.displayName))))}))},Reviewers=({site:e,onUpdateReviewers:t,participants:a,isLoading:n})=>{const[r,i]=(0,g.useState)([]),[c,d]=(0,g.useState)(!1),m=(0,g.useCallback)((async e=>{d(!0);try{await t(e)}finally{d(!1)}}),[t]);return(0,g.useEffect)((()=>{i(a.filter((e=>"UNAPPROVED"!==e.status||"REVIEWER"===e.role)).sort(((e,t)=>e.status<t.status?0:1)))}),[a]),g.createElement(s.A,{container:!0,direction:"row",spacing:2,alignItems:"center"},n||c?g.createElement(s.A,{item:!0},g.createElement(f.A,null)):g.createElement(s.A,{item:!0},0===r.length?g.createElement(o.A,{variant:"body2"},"No reviewers!"):g.createElement(st.A,{max:5},r.map((e=>g.createElement(lt.A,{style:{borderWidth:"0px"},overlap:"circle",anchorOrigin:{vertical:"top",horizontal:"right"},invisible:"UNAPPROVED"===e.status,key:e.accountId,badgeContent:"CHANGES_REQUESTED"===e.status?g.createElement(b.Ay,{title:"Requested changes"},g.createElement(l.A,{bgcolor:"white",borderRadius:"100%"},g.createElement(se.A,{fontSize:"small",htmlColor:"#FFAB00"}))):g.createElement(b.Ay,{title:"Approved"},g.createElement(l.A,{bgcolor:"white",borderRadius:"100%"},g.createElement(J.A,{fontSize:"small",htmlColor:"#07b82b"})))},g.createElement(b.Ay,{title:e.displayName},g.createElement(ge.A,{alt:e.displayName,src:e.avatarUrl}))))))),g.createElement(s.A,{style:{width:"100%"},item:!0},g.createElement(AddReviewers,{site:e,reviewers:r,updateReviewers:m})))},PullRequestSidebar=({state:e,controller:t})=>{const a=(0,g.useMemo)((()=>{const t=e.tasks.length,a=e.tasks.filter((e=>e.isComplete)).length;return 0===t?"0 tasks":`${a} of ${t} complete`}),[e.tasks]);return g.createElement(l.A,{margin:2},g.createElement(s.A,{container:!0,spacing:1,direction:"column"},g.createElement(s.A,{item:!0},g.createElement(o.A,{variant:"h6"},g.createElement("strong",null,"Author")),g.createElement(l.A,{hidden:e.loadState.basicData},g.createElement(s.A,{container:!0,spacing:1,direction:"row",alignItems:"center"},g.createElement(s.A,{item:!0}," ",g.createElement(b.Ay,{title:e.pr.data.author.displayName},g.createElement(ge.A,{alt:e.pr.data.author.displayName,src:e.pr.data.author.avatarUrl}))),g.createElement(s.A,{item:!0},g.createElement(o.A,null,e.pr.data.author.displayName)))),g.createElement(l.A,{hidden:!e.loadState.basicData},g.createElement(f.A,null))),g.createElement(s.A,{item:!0},g.createElement(Ee,{isLoading:e.loadState.basicData,isDefaultExpanded:!0,hidden:!1,title:"Reviewers"},g.createElement(Reviewers,{site:e.pr.site,participants:e.pr.data.participants,onUpdateReviewers:t.updateReviewers,isLoading:e.loadState.basicData}))),g.createElement(s.A,{item:!0},g.createElement(o.A,{variant:"h6"},g.createElement("strong",null,"Created")),g.createElement(b.Ay,{title:e.pr.data.ts||"unknown"},g.createElement(o.A,null,formatDate(e.pr.data.ts)))),g.createElement(s.A,{item:!0},g.createElement(o.A,{variant:"h6"},g.createElement("strong",null,"Updated")),g.createElement(b.Ay,{title:e.pr.data.updatedTs||"unknown"},g.createElement(o.A,null,formatDate(e.pr.data.updatedTs)))),g.createElement(s.A,{item:!0},g.createElement(Ee,{isLoading:e.loadState.buildStatuses,isDefaultExpanded:!0,hidden:0===e.buildStatuses.length,title:`${e.buildStatuses.filter((e=>"SUCCESSFUL"===e.state)).length} of ${e.buildStatuses.length} build${e.buildStatuses.length>0?"s":""} passed`},g.createElement(PRBuildStatus,{buildStatuses:e.buildStatuses,openBuildStatus:t.openBuildStatus}))),g.createElement(s.A,{item:!0},g.createElement(Ee,{title:"Tasks",subtitle:a,isDefaultExpanded:!0,isLoading:e.loadState.tasks},g.createElement(PageTaskList,{tasks:e.tasks,onEdit:t.editTask,onDelete:t.deleteTask})))))},mt=(0,r.A)((e=>({grow:{flexGrow:1},title:{flexGrow:0,marginRight:e.spacing(3),marginLeft:e.spacing(1)},paper100:{overflow:"hidden",height:"100%",backgroundColor:"transparent",boxShadow:"none",border:"none"},paperOverflow:{overflow:"hidden",backgroundColor:"transparent",boxShadow:"none",border:"none"},verticalDivider:{height:"100%",marginLeft:e.spacing(1),marginRight:e.spacing(1),display:"none",[e.breakpoints.up("md")]:{display:"block"}}}))),PullRequestTitleSection=({state:e,controller:t})=>g.createElement(l.A,{margin:2},g.createElement(s.A,{container:!0,direction:"column",spacing:1},g.createElement(s.A,{item:!0},g.createElement(n.wI,{fullWidth:!0,defaultValue:e.pr.data.title,onSave:t.updateTitle})),g.createElement(s.A,{item:!0},g.createElement(s.A,{container:!0,direction:"row",spacing:2,justify:"space-between"},g.createElement(s.A,{item:!0},g.createElement(l.A,{marginLeft:2},g.createElement(BranchInfo,{source:e.pr.data.source,destination:e.pr.data.destination,author:e.pr.data.author,isLoading:e.loadState.basicData}))),g.createElement(s.A,{item:!0},g.createElement(i.A,{disabled:e.pr.data.source.branchName===e.currentBranchName||e.isCheckingOutBranch,onClick:t.checkoutBranch,color:"primary"},g.createElement(o.A,{variant:"button",noWrap:!0},e.pr.data.source.branchName===e.currentBranchName?"Source branch checked out":e.isCheckingOutBranch?"Checking out...":"Checkout source branch"))))))),PullRequestDetailsPage=()=>{const[e,t]=function usePullRequestDetailsController(){const[e,t]=(0,g.useReducer)(pullRequestDetailsReducer,T),a=(0,g.useCallback)((e=>{switch(e.type){case D.Init:t({type:B.Init,data:e});break;case D.UpdateSummary:t({type:B.UpdateSummary,data:e});break;case D.UpdateTitle:t({type:B.UpdateTitle,data:e});break;case D.UpdateCommits:t({type:B.UpdateCommits,data:e});break;case D.UpdateReviewers:t({type:B.UpdateReviewers,data:e});break;case D.UpdateApprovalStatus:t({type:B.UpdateApprovalStatus,data:e});break;case D.CheckoutBranch:t({type:B.CheckoutBranch,data:e});break;case D.UpdateComments:t({type:B.UpdateComments,data:e});break;case D.UpdateTasks:t({type:B.UpdateTasks,data:e});break;case D.UpdateFileDiffs:t({type:B.UpdateFileDiffs,data:e});break;case D.UpdateConflictedFiles:t({type:B.UpdateConflictedFiles,data:e});break;case D.UpdateBuildStatuses:t({type:B.UpdateBuildStatuses,data:e});break;case D.UpdateMergeStrategies:t({type:B.UpdateMergeStrategies,data:e});break;case D.UpdateRelatedJiraIssues:t({type:B.UpdateRelatedJiraIssues,data:e});break;default:(0,v.z)(e)}}),[]),[n,r]=(0,I.G)(a),l=(0,g.useCallback)((()=>{t({type:B.Loading}),n({type:w.I.Refresh})}),[n]),s=(0,g.useCallback)((e=>n({type:w.I.CopyLink,linkType:"pullRequest",url:e})),[n]),i=(0,g.useCallback)(((e,t,a)=>new Promise(((l,s)=>{(async()=>{try{let s="";a&&(s=(0,S.A)(),a.onabort=()=>{n({type:w.I.Cancel,abortKey:s,reason:"pull request fetchUsers cancelled by client"})});const i=await r({type:y.FetchUsersRequest,site:e,query:t,abortKey:a?s:void 0},D.FetchUsersResponse,N.QJ);l(i.users)}catch(e){s(e)}})()}))),[n,r]),o=(0,g.useCallback)((e=>{t({type:B.Loading}),n({type:y.UpdateSummaryRequest,text:e})}),[n]),c=(0,g.useCallback)((e=>{t({type:B.Loading}),n({type:y.UpdateTitleRequest,text:e})}),[n]),d=(0,g.useCallback)((e=>new Promise(((t,a)=>{(async()=>{try{await r({type:y.UpdateReviewers,reviewers:e},D.UpdateReviewersResponse,N.QJ),t()}catch(e){a(e)}})()}))),[r]),m=(0,g.useCallback)((e=>{t({type:B.Loading}),n({type:y.UpdateApprovalStatus,status:e})}),[n]),u=(0,g.useCallback)((()=>{t({type:B.Loading}),t({type:B.SetCheckoutLoading,data:{isLoading:!0}}),r({type:y.CheckoutBranch},D.CheckoutBranch,N.QJ).finally((()=>{t({type:B.SetCheckoutLoading,data:{isLoading:!1}})}))}),[r]),p=(0,g.useCallback)(((e,t)=>new Promise(((a,n)=>{(async()=>{try{await r({type:y.PostComment,rawText:e,parentId:t},D.PostCommentResponse,N.QJ),a()}catch(e){n(e)}})()}))),[r]),E=(0,g.useCallback)(((e,t)=>new Promise(((a,n)=>{(async()=>{try{await r({type:y.EditComment,rawContent:e,commentId:t},D.EditCommentResponse,N.QJ),a()}catch(e){n(e)}})()}))),[r]),h=(0,g.useCallback)((e=>new Promise(((t,a)=>{(async()=>{try{await r({type:y.DeleteComment,comment:e},D.DeleteCommentResponse,N.QJ),t()}catch(e){a(e)}})()}))),[r]),A=(0,g.useCallback)(((e,t)=>new Promise(((a,n)=>{(async()=>{try{await r({type:y.AddTask,content:e,commentId:t},D.AddTaskResponse,N.QJ),a()}catch(e){n(e)}})()}))),[r]),f=(0,g.useCallback)((e=>new Promise(((t,a)=>{(async()=>{try{await r({type:y.EditTask,task:e},D.EditTaskResponse,N.QJ),t()}catch(e){a(e)}})()}))),[r]),b=(0,g.useCallback)((e=>new Promise(((t,a)=>{(async()=>{try{await r({type:y.DeleteTask,task:e},D.DeleteTaskResponse,N.QJ),t()}catch(e){a(e)}})()}))),[r]),C=(0,g.useCallback)((e=>n({type:y.OpenDiffRequest,fileDiff:e})),[n]),k=(0,g.useCallback)(((e,a,r,l)=>{t({type:B.Loading}),n({type:y.Merge,mergeStrategy:e,commitMessage:a,closeSourceBranch:r,issues:l})}),[n]),R=(0,g.useCallback)((e=>{n({type:y.OpenJiraIssue,issue:e})}),[n]),U=(0,g.useCallback)((e=>{n({type:y.OpenBuildStatus,buildStatus:e})}),[n]);return[e,(0,g.useMemo)((()=>({postMessage:n,refresh:l,copyLink:s,fetchUsers:i,updateSummary:o,updateTitle:c,updateReviewers:d,updateApprovalStatus:m,checkoutBranch:u,postComment:p,editComment:E,deleteComment:h,addTask:A,editTask:f,deleteTask:b,openDiff:C,merge:k,openJiraIssue:R,openBuildStatus:U})),[n,l,s,i,o,c,d,m,u,p,E,h,A,f,b,C,k,R,U])]}();return g.createElement(x.Provider,{value:t},g.createElement(A.H,{context:{view:h.id.PullRequestPage},postMessageFunc:t.postMessage},g.createElement(c.A,{maxWidth:"xl"},g.createElement(PullRequestDetailsPageContent,{state:e,controller:t}))))};function PullRequestDetailsPageContent({state:e,controller:t}){const a=mt(),n=(0,d.A)(),r=(0,m.A)(n.breakpoints.up("md")),i=(0,E.A)((async(a,n)=>await t.fetchUsers(e.pr.site,a,n)),300,{leading:!1});return g.createElement(g.Fragment,null,g.createElement(PullRequestHeader,{state:e,controller:t}),g.createElement(u.A,null),g.createElement(l.A,{marginTop:1}),g.createElement(s.A,{container:!0,spacing:1,direction:"row"},g.createElement(s.A,{item:!0,xs:12,md:9,lg:9,xl:9},g.createElement(p.A,{className:a.paper100},g.createElement(PullRequestTitleSection,{state:e,controller:t}),g.createElement(PullRequestMainContent,{state:e,controller:t,handleFetchUsers:i}))),g.createElement(s.A,{item:!0,xs:12,md:3,lg:3,xl:3,style:{borderLeft:r?"1px solid var(--vscode-input-border)":"none"}},g.createElement(p.A,{className:a.paperOverflow},g.createElement(PullRequestSidebar,{state:e,controller:t})))))}const ut=PullRequestDetailsPage},55765:(e,t,a)=>{a.d(t,{BM:()=>i,F2:()=>l,GT:()=>o});var n=a(6406);const r={details:n.Rc,ownerSlug:"",repoSlug:""},l={accountId:"",displayName:"",url:"",avatarUrl:"",mention:""},s={id:"",scm:void 0,name:"",displayName:"",fullName:"",parentFullName:void 0,url:"",avatarUrl:"",mainbranch:void 0,developmentBranch:void 0,branchingModel:void 0,issueTrackerEnabled:!1};var i;!function(e){e.ADDED="A",e.DELETED="D",e.COPIED="C",e.MODIFIED="M",e.RENAMED="R",e.CONFLICT="CONFLICT",e.UNKNOWN="X"}(i||(i={}));const o={site:r,data:{siteDetails:n.Rc,id:"",version:0,url:"",author:l,participants:[],source:{repo:s,branchName:"",commitHash:""},destination:{repo:s,branchName:"",commitHash:""},title:"",htmlSummary:"",rawSummary:"",ts:"",updatedTs:"",state:"OPEN",closeSourceBranch:!1,taskCount:0,draft:!1}}},59302:(e,t,a)=>{a.d(t,{f:()=>Commits});var n=a(82096),r=a(65594),l=a(90652),s=a(10782),i=a(54392),o=a(96232),c=a(90648),d=a(79764),m=a(24896),u=a(6861),p=a(44414),E=a(9798),g=a(96540);const h=(0,n.A)((e=>({monospace:{fontFamily:"monospace"}}))),Commits=e=>{const t=h(),a=(0,g.useMemo)((()=>e.commits.map((e=>({hash:e.hash,message:e.message,href:e.url,ts:new Date(e.ts)}))).map((e=>g.createElement(r.A,{key:e.hash},g.createElement(l.A,null,g.createElement(s.A,{href:e.href},g.createElement(i.A,{className:t.monospace},e.hash.substring(0,8)))),g.createElement(l.A,null,g.createElement(o.Ay,{title:e.message,placement:"bottom-start"},g.createElement(i.A,null,e.message.trim().split("\n")[0]))),g.createElement(l.A,null,g.createElement(o.Ay,{title:e.ts.toLocaleString()},g.createElement(i.A,null,0===(0,u.I)(e.ts,new Date)?(0,p.m)(e.ts,{addSuffix:!0}):(0,E.GP)(e.ts,"yyyy-MM-dd")))))))),[t.monospace,e.commits]);return g.createElement(c.A,null,g.createElement(d.A,{size:"small","aria-label":"commits list"},g.createElement(m.A,null,a)))}},64933:(e,t,a)=>{var n,r,l;a.d(t,{id:()=>r,jG:()=>n}),function(e){e.AtlascodeUiErrors="atlascode.ui.errors"}(n||(n={})),function(e){e.CreateJiraIssuePage="page:v1:jira:createIssue",e.JiraIssuePage="page:v1:jira:issue",e.OldStartWorkPage="page:v1:bitbucket:startWork",e.OnboardingPage="page:v2:onboarding",e.SettingsPage="page:v2:settings",e.BitbucketIssuePage="page:v2:bitbucket:issue",e.PullRequestPage="page:v2:bitbucket:pullRequest",e.CreatePullRequestPage="page:v2:bitbucket:createPullRequest",e.PipelineSummaryPage="page:v2:bitbucket:pipeline",e.StartWorkPage="page:v2:jira:startWork",e.Other="other"}(r||(r={})),function(e){e.Yes="yes",e.Ignore="ignore",e.Disable="disable"}(l||(l={}))},67826:(e,t,a)=>{a.d(t,{A:()=>StoppedIcon});var n=a(41728),r=a(96540);function StoppedIcon(e){return r.createElement(n.A,{...e,viewBox:"0 0 16 16",component:t=>r.createElement("svg",{...t,fill:"currentColor","fill-rule":"evenodd"},r.createElement("title",null,e.titleAccess),r.createElement("path",{d:"M4.184 9h8V7h-8v2zm11.367-4.102a8.039 8.039 0 0 0-1.703-2.546A8.122 8.122 0 0 0 11.293.641 7.769 7.769 0 0 0 8.184 0a7.789 7.789 0 0 0-3.102.633 8.043 8.043 0 0 0-2.547 1.703A8.11 8.11 0 0 0 .824 4.891 7.747 7.747 0 0 0 .184 8c0 1.083.211 2.117.632 3.102.422.984.99 1.833 1.704 2.546a8.084 8.084 0 0 0 2.554 1.711 7.766 7.766 0 0 0 3.11.641 7.788 7.788 0 0 0 3.101-.633 8.043 8.043 0 0 0 2.547-1.703 8.133 8.133 0 0 0 1.711-2.555A7.765 7.765 0 0 0 16.184 8a7.796 7.796 0 0 0-.633-3.102z"}))})}},69211:(e,t,a)=>{a.d(t,{K:()=>DiffList});var n=a(82096),r=a(96232),l=a(33615),s=a(54392),i=a(90648),o=a(79764),c=a(24896),d=a(65594),m=a(90652),u=a(10782),p=a(18297),E=a(34164),g=a(96540),h=a(55765);const A=(0,n.A)((e=>({monospace:{fontFamily:"monospace"},chip:{borderRadius:"3px",fontWeight:"bold",width:"100%"},table:{width:"unset"},tableCell:{borderBottom:"none",padding:"3px"},linesAdded:{backgroundColor:"#cfc",color:"#399839"},linesRemoved:{backgroundColor:"#fdd",color:"#c33"},fileStatusAdded:{backgroundColor:"#fff",borderColor:"#60b070",color:"#14892c"},fileStatusModified:{backgroundColor:"#fff",borderColor:"#a5b3c2",color:"#4a6785"},fileStatusDeleted:{backgroundColor:"#fff",borderColor:"#e8a29b",color:"#d04437"},fileStatusRenamed:{backgroundColor:"#fff",borderColor:"#c0ad9d",color:"#815b3a"},fileStatusCopied:{backgroundColor:"#fff",borderColor:"#f2ae00",color:"#f29900"},fileStatusConflict:{backgroundColor:"#f6c342",borderColor:"#f6c342",color:"#594300"},fileStatusDefault:{backgroundColor:"#fff",borderColor:"#881be0",color:"#7a44a6"}}))),DiffList=e=>{const t=A(),fileStatusToString=e=>{switch(e){case h.BM.ADDED:return"ADDED";case h.BM.MODIFIED:return"MODIFIED";case h.BM.DELETED:return"DELETED";case h.BM.RENAMED:return"RENAMED";case h.BM.COPIED:return"COPIED";case h.BM.CONFLICT:return"CONFLICT";default:return"UNKNOWN"}},fileStatusClassName=e=>{switch(e){case h.BM.ADDED:return t.fileStatusAdded;case h.BM.MODIFIED:return t.fileStatusModified;case h.BM.DELETED:return t.fileStatusDeleted;case h.BM.RENAMED:return t.fileStatusRenamed;case h.BM.COPIED:return t.fileStatusCopied;case h.BM.CONFLICT:return t.fileStatusConflict;default:return t.fileStatusDefault}};return g.createElement(i.A,null,g.createElement(o.A,{size:"small",className:t.table,"aria-label":"commits list"},g.createElement(c.A,null,e.fileDiffs.map((a=>g.createElement(d.A,{key:a.file},g.createElement(m.A,{className:t.tableCell}),g.createElement(m.A,{className:t.tableCell,align:"center"},g.createElement(l.A,{className:(0,E.A)(t.chip,t.linesAdded),label:`+${a.linesAdded}`,size:"small"})),g.createElement(m.A,{className:t.tableCell,align:"center"},g.createElement(l.A,{className:(0,E.A)(t.chip,t.linesRemoved),label:`-${a.linesRemoved}`,size:"small"})),g.createElement(m.A,{className:t.tableCell},g.createElement(r.Ay,{title:`${fileStatusToString(a.status)} ${a.similarity?`(${a.similarity}% similar)`:""}`},g.createElement(l.A,{className:(0,E.A)(t.chip,fileStatusClassName(a.status)),label:g.createElement(s.A,{className:t.monospace},a.status.substring(0,1)),size:"small",variant:"outlined"}))),g.createElement(m.A,{className:t.tableCell},((e,a)=>{const n=e.newPath||"",i=e.oldPath||"";return a.includes(n)&&a.includes(i)?g.createElement(r.Ay,{title:fileStatusToString(h.BM.CONFLICT)},g.createElement(l.A,{className:(0,E.A)(t.chip,fileStatusClassName(h.BM.CONFLICT)),label:g.createElement(s.A,{className:t.monospace},fileStatusToString(h.BM.CONFLICT).substring(0,1)),size:"small",variant:"outlined"})):g.createElement("div",null)})(a,e.conflictedFiles)),g.createElement(m.A,{className:t.tableCell},g.createElement(u.A,{component:"button",onClick:()=>e.openDiffHandler(a)},g.createElement(s.A,null,a.file))),g.createElement(m.A,{className:t.tableCell},g.createElement(p.A,{hidden:!a.hasComments},g.createElement(r.Ay,{title:"contains comments"},g.createElement(s.A,null,"\u{1f4ac}"))))))))))}},75981:(e,t,a)=>{a.d(t,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var n=a(82096),r=a(33615),l=a(96540);const s=(0,n.A)((e=>({default:{color:"#42526E",backgroundColor:"#DFE1E6",fontWeight:"bold",textTransform:"uppercase"},inprogress:{color:"#0747A6",backgroundColor:"#DEEBFF",fontWeight:"bold",textTransform:"uppercase"},moved:{color:"#172B4D",backgroundColor:"#FFF0B3",fontWeight:"bold",textTransform:"uppercase"},new:{color:"#403294",backgroundColor:"#EAE6FF",fontWeight:"bold",textTransform:"uppercase"},removed:{color:"#BF2600",backgroundColor:"#FFEBE6",fontWeight:"bold",textTransform:"uppercase"},success:{color:"#006644",backgroundColor:"#E3FCEF",fontWeight:"bold",textTransform:"uppercase"}}))),__WEBPACK_DEFAULT_EXPORT__=({appearance:e,label:t})=>{const a=s();return l.createElement(r.A,{className:a[e],size:"small",label:t})}},96611:(e,t,a)=>{a.d(t,{H:()=>AtlascodeErrorBoundary});var n=a(74228),r=a(12679),l=a(96540),s=a(64933),i=a(50569);const AtlascodeErrorBoundary=({children:e,postMessageFunc:t,context:a})=>{const o=(0,l.useCallback)((e=>{const{error:n,info:r,...l}=e.payload.attributes;t({type:i.I.SendAnalytics,errorInfo:{...a,errorType:n.name,errorMessage:n.message,errorCause:n.cause,componentStack:simplifyStack(r.componentStack,(e=>{var t;return null===(t=e.match(/in (.*) \(created by (.*)\)/))||void 0===t?void 0:t[1]})),stack:simplifyStack(n.stack,(e=>{var t;return null===(t=e.match(/at (.*) \((.*)\)/))||void 0===t?void 0:t[1]})),...l}})}),[t,a]);return l.createElement(n.A,{channel:s.jG.AtlascodeUiErrors,onEvent:o},l.createElement(r.A,{channel:s.jG.AtlascodeUiErrors,data:{component:"global"}},e))},simplifyStack=(e,t)=>{const a=e.split("\n").map(t).filter(Boolean).join(" < ");return a.length>1500?a.substring(0,1500)+"...":a}}}]);